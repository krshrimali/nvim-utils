# ðŸŒ³ Universal Treesitter Utils (`nvim-utils.nvim`)

FYI: README generated by ChatGPT.

A Neovim plugin to explore, inspect, and extract structure from code using [nvim-treesitter](https://github.com/nvim-treesitter/nvim-treesitter). 

### âœ¨ Features

- ðŸ§  Extract current function or class under cursor.
- ðŸ“‹ Copy parent function/class to clipboard.
- ðŸª„ Show multi-line function **signatures**.
- ðŸ§ª Run `pytest` for Python functions (optional, customizable).
- ðŸ“‹ Copy the test command for the current parent function to clipboard.
- ðŸ”‘ Keymap-ready with LazyVim/which-key support.

---

## ðŸ“¦ Installation (with LazyVim / `lazy.nvim`)

In your Lazy config (`~/.config/nvim/lua/plugins/tgkrsutil.lua`):

```lua
return {
  "krshrimali/nvim-utils",
  config = function()
    require("tgkrsutil").setup({
      enable_test_runner = true,
      test_runner = function(file, func)
        return string.format("pytest %s -k %s", file, func)
      end,
    })
  end,
  event = "VeryLazy",
}
```

---

## ðŸ”‘ Key Mappings

| Mapping         | Description                                  |
|----------------|----------------------------------------------|
| `<leader>rt`   | Run test for function (Python only)           |
| `<leader>rT`   | Run test in a new terminal                    |
| `<leader>rif`  | Copy parent function to clipboard             |
| `<leader>ric`  | Copy parent class to clipboard                |
| `<leader>rsf`  | Show full parent function **signature**       |
| `<leader>rsc`  | Show parent class signature (first line)      |

> These are registered automatically in `setup()` but can be overridden manually.

---

## ðŸ§  How it Works

This plugin uses Treesitter to:
- Walk up the syntax tree to find enclosing functions/classes
- Extract signature headers (even multi-line ones!)
- Provide consistent behavior across Python, Lua, JavaScript, etc.

---

## ðŸ§ª Test Runner

Test support is **Python-only by default**, via `pytest`.

You can override it:

```lua
require("tgkrsutil").setup({
  test_runner = function(file, func)
    return "go test -v -run ^" .. func .. "$ " .. file
  end
})
```

---

## âœ… Requirements

- [nvim-treesitter](https://github.com/nvim-treesitter/nvim-treesitter)
- Supported Treesitter parser for your language (e.g. `:TSInstall python`)
- Optional: `pytest` if using the default test runner

---

## ðŸªª License

MIT Â© Kushashwa Ravi Shrimali

