# üß™ nvim-utils.nvim

FYI: README generated by ChatGPT.

---

## üöÄ Features

- üß† **Treesitter-powered** analysis of functions and classes
- üß™ Run `pytest` on the current function under the cursor
- üìã Copy the parent function/class to your clipboard
- üñº Show function signature in a floating window
- üîç Search inside parent function/class
- üîß Reuse terminal buffer or open a new one for testing

---

## üì¶ Installation

### Using [lazy.nvim](https://github.com/folke/lazy.nvim)

```lua
{
  "krshrimali/nvim-utils",
  config = function()
    require("tgkrsutil")
  end,
}
```

### Using packer.nvim

```lua
use({
  "krshrimali/nvim-utils",
  config = function()
    require("tgkrsutil")
  end,
})
```

---

## üß∞ Requirements

- [nvim-treesitter](https://github.com/nvim-treesitter/nvim-treesitter)
- Python Treesitter parser installed:  
  Run `:TSInstall python` inside Neovim if not already installed.
- `pytest` installed and in your `$PATH`.

---

## üéÆ Key Mappings

> Feel free to adjust these in your own config.

| Mapping         | Action                                      |
|----------------|---------------------------------------------|
| `<leader>rt`   | Run `pytest` on current function             |
| `<leader>rT`   | Run `pytest` in a **new** terminal           |
| `<leader>rc`   | Copy test command to clipboard               |
| `<leader>rf`   | Show current function signature in a popup   |
| `<leader>rif`  | Copy the current parent function             |
| `<leader>ric`  | Copy the current parent class                |
| `<leader>rvif` | Visually select the parent function          |
| `<leader>rvic` | Visually select the parent class             |
| `<leader>rsif` | Search forward in parent function            |
| `<leader>rSif` | Search backward in parent function           |
| `<leader>rsic` | Search forward in parent class               |
| `<leader>rSic` | Search backward in parent class              |

---

## ‚úç Example

Place your cursor inside a test function, then press:

```vim
<leader>rt
```

This will:

- Detect the current Python function using Treesitter
- Build a `pytest` command
- Send it to a terminal split (or reuse an existing one)

---

## üß™ Test Command Generated

```bash
pytest /absolute/path/to/test_file.py -k "test_function_name"
```

---

## üí° Pro Tips

- Use with [which-key.nvim](https://github.com/folke/which-key.nvim) to discover the `<leader>r` mappings
- Works best in projects already using `pytest`
- You can easily modify the wrapping logic to match your preferred line length or code style

---

## üìÑ License

MIT ¬© Kushashwa Ravi Shrimali
